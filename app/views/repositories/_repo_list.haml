-# app/views/repositories/_repo_list.html.haml

%div{ class: "bg-indigo-100 p-3 flex items-center justify-between" }
  %div
    %h1{ class: "text-xl font-semibold" } Repositories
  %div
    = link_to "New", new_repository_path,
      class: "button-primary"

- if @repositories.empty?
  %div{ class: "p-3" }
    %div{ class: "font-semibold mb-2" } No repositories yet
    %div{ class: "text-sm text-gray-700 mb-4" }
      Create one to import files from a local folder.
    = link_to "Create your first repository", new_repository_path,
      class: "inline-flex px-3 py-2 rounded-lg border bg-white hover:bg-gray-50 text-sm"
- else
  %div{ class: "divide-y divide-gray-300 flex-grow overflow-y-auto" }
    - @repositories.each do |repo|
      = link_to repositories_path(repository_id: repo.id),
        class: "block p-3 hover:bg-gray-50 #{params[:repository_id] == repo.id.to_s || (params[:repository_id].nil? && repo == @repositories.first) ? 'bg-gray-50' : ''}" do
        %div{ class: "flex items-start gap-3" }
          -# folder icon (simple svg)
          %div{ class: "w-10 h-10 rounded-lg bg-white flex items-center justify-center shrink-0" }
            %svg{ width: "40", height: "40", viewBox: "0 0 24 24", fill: "none", xmlns: "http://www.w3.org/2000/svg" }
              %path{ d: "M3 6a2 2 0 0 1 2-2h5l2 2h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6z", stroke: "currentColor", stroke_width: "1.6" }
          %div{ class: "min-w-0" }
            %div{ class: "font-semibold text-sm truncate" }= repo.name

          %div{ class: "ml-auto flex gap-2" }
            = button_to "Edit",
              edit_repository_path(repo),
              form: { class: "inline" },
              class: "button-secondary"
