-# app/views/repositories/_current_pattern.html.haml
-# Left sidebar card: Current Pattern (aligned with repositories/show.html.haml)
-# Uses repo-meta-* styles defined in app/assets/stylesheets/repository-show.css

- pattern = @current_pattern

%div{ class: "rounded-2xl border border-indigo-200 bg-white shadow-sm overflow-hidden" }
  -# Header (match repositories/show.html.haml)
  %div{ class: "bg-indigo-100 px-4 py-3 flex items-start justify-between gap-3" }
    %div{ class: "min-w-0" }
      %div{ class: "text-sm font-semibold text-gray-900 truncate" }
        Current Pattern

    %div{ class: "shrink-0 flex items-center gap-2" }
      = link_to lexical_patterns_path,
        class: "icon-button",
        data: { turbo_frame: "repo_right", controller: "tooltip", tooltip_text_value: "All patterns", tooltip_placement_value: "bottom" } do
        = svg_icon("ellipsis-horizontal", class_name: "w-6 h-6")

  -# Body
  %div{ class: "px-2 py-2 space-y-2" }
    - name_text = pattern&.name.presence || "—"
    %div.repo-meta-block
      %div.repo-meta-label name
      %div.repo-meta-value{ title: name_text }
        = name_text

    - regexp_text = pattern&.pattern.presence || "—"
    %div.repo-meta-block
      %div.repo-meta-label regexp
      %div.repo-meta-value{ title: regexp_text }
        = regexp_text