-# app/views/repositories/new.html.haml
%div.max-w-5xl.mx-auto.p-6.space-y-10
  / ===== Header & meta =====
  %div.space-y-3
    %div.font-semibold.text-lg
      #{@repository.name}

    %div.text-sm.text-gray-600.font-mono
      Last scan version: #{@repository.current_snapshot&.commit_sha || "N/A"}

  / ===== Form =====
  %div
    = render "repositories/form"

  / ===== Actions (two columns) =====
  %div.grid.grid-cols-1.gap-6.lg:grid-cols-2
    / --- Reimport card ---
    %div.rounded-2xl.border.bg-white.p-5.shadow-sm.space-y-3
      %div.font-semibold
        Reimport files

      %div.text-sm.text-gray-600
        Reimport all permitted files from the repository root path.
        Existing files will be updated; new files will be added.

      %div.flex.justify-end
        = button_to "Import",
          import_repository_path(@repository),
          method: :get,
          onclick: "return window.PopConfirmLog.open(event, this)",
          data: @confirm_message[:import],
          class: "button-secondary"

    / --- Delete card ---
    %div.rounded-2xl.border.border-red-200.bg-white.p-5.shadow-sm.space-y-3
      %div.font-semibold.text-red-600
        Delete repository

      %div.text-sm.text-gray-600
        Delete this repository and all its files as well as lexemes and reviews
        associated with them from the system.
        %span.font-semibold.text-red-600
          This action is irreversible.

      %div.flex.justify-end
        = button_to "Delete",
          repository_path(@repository),
          method: :delete,
          onclick: "return window.PopConfirmLog.open(event, this)",
          data: @confirm_message[:delete],
          class: "button-danger"

  / ===== Footer =====
  %div.pt-2
    %a.button-secondary{ href: "javascript:history.back()" }
      Back