-# app/views/layouts/repository_workspace.html.haml
-# Reuse layouts/application.html.haml (no duplicated <head>/<body>)

- content_for :layout_main do
  %div{ class: "flex h-[85vh]" }
    -# Left: repositories (25%)
    %div{ class: "w-[25%] rounded-lg bg-white overflow-hidden flex flex-col" }
      = render "repositories/repo_dropdown"

      - if @selected_id.present?
        = turbo_frame_tag "repo_show",
            src: repository_path(@selected_id),
            loading: "eager",
            class: "flex-1 overflow-y-auto"
      - else
        %div{ class: "p-3 text-sm text-gray-600" }
          No repository selected.

    -# Divider
    %div{ class: "w-px bg-gray-300 mx-4" }

    -# Right: dynamic area (75%)
    %div{ class: "w-[75%] rounded-lg bg-white overflow-hidden flex flex-col" }
      = turbo_frame_tag "repo_right", class: "flex-1 overflow-y-auto" do
        = yield

= render template: "layouts/application"