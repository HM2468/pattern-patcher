-# app/views/layouts/repository_workspace.html.haml
-# Reuse layouts/application.html.haml (no duplicated <head>/<body>)

- content_for :layout_main do
  %div{ class: "flex h-screen" }
    -# Left: flex-basis-[22rem]
    %div{ class: "w-[20rem] shrink-0 rounded-lg bg-white overflow-hidden flex flex-col" }
      = render "shared/header"
      %div{ class: "flex-1 min-h-0 flex flex-col space-y-3 p-3" }
        = render "lexical_patterns/current_pattern"
        = render "repositories/repo_dropdown"
        %div{ class: "flex-1 min-h-0 overflow-y-auto space-y-3" }
          - if @selected_id.present?
            = turbo_frame_tag "repo_show",
                src: repository_path(@selected_id),
                loading: "eager",
                class: "block"

    -# Divider
    %div{ class: "w-px bg-gray-300 mx-4" }

    -# Right: fill remaining width
    %div{ class: "flex-1 min-w-0 rounded-lg bg-white overflow-hidden flex flex-col" }
      = turbo_frame_tag "repo_right", class: "flex-1 min-w-0 overflow-y-auto" do
        = yield
= render template: "layouts/application"