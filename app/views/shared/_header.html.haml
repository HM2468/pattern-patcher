-# app/views/shared/_header.html.haml
%header{ class: "sticky top-0 z-20 h-[65px] bg-white/80 backdrop-blur border-b border-gray-200" }
  %div{ class: "w-full px-6 h-full flex items-center justify-between" }

    -# Brand
    %div{ class: "flex items-center gap-3" }
      %div{ class: "h-9 w-9 rounded-xl bg-indigo-800 text-white flex items-center justify-center font-semibold shadow-sm" }
        PP
      %div{ class: "leading-tight" }
        %div{ class: "text-sm font-semibold text-gray-900" } PatternPatcher
        %div{ class: "text-xs text-gray-500" } Web Console

    -# Nav
    %nav{ class: "hidden md:flex items-center gap-1 text-sm bg-indigo-50 border border-gray-200 rounded-2xl p-1" }
      - dash_active = current_page?(root_path)
      - workspace_controllers = %w[repositories repository_files scan_runs occurrences ]
      - repo_active = workspace_controllers.include?(controller_name)
      - proc_active = controller_name == "lexeme_processors"

      = link_to "Dashboard", root_path,
        class: "px-3 py-2 rounded-xl #{dash_active ? 'bg-indigo-300 shadow-sm text-gray-900' : 'text-gray-700 hover:bg-white/70'}"

      = link_to "Repositories", repositories_path,
        class: "px-3 py-2 rounded-xl #{repo_active ? 'bg-indigo-300 shadow-sm text-gray-900' : 'text-gray-700 hover:bg-white/70'}"

      = link_to "Processing", lexeme_processors_path,
        class: "px-3 py-2 rounded-xl #{proc_active ? 'bg-indigo-300 shadow-sm text-gray-900' : 'text-gray-700 hover:bg-white/70'}"

    %div{ class: "flex items-center gap-2" }
      %div{ class: "hidden md:block text-xs text-gray-500" }
        %span{ class: "font-mono" }= Time.current.strftime("%Y-%m-%d")