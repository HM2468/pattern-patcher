-# app/views/shared/_header.html.haml
-# Sidebar header (Brand on top, Nav below)

%div{ class: "border-b border-gray-200 bg-white/80 backdrop-blur" }
  %div{ class: "px-4 py-4 flex flex-col gap-3" }

    -# Brand
    %div{ class: "flex items-center gap-3" }
      %div{ class: "h-9 w-9 rounded-xl bg-indigo-800 text-white flex items-center justify-center font-semibold shadow-sm" }
        PP
      %div{ class: "leading-tight" }
        %div{ class: "text-sm font-semibold text-gray-900" } PatternPatcher
        %div{ class: "text-xs text-gray-500" } Web Console

    -# Nav
    %nav{ class: "flex items-center justify-center gap-2 text-sm bg-indigo-50 border border-gray-200 rounded-2xl p-1" }
      - workspace_controllers = %w[repositories repository_files scan_runs occurrences]
      - repo_active = workspace_controllers.include?(controller_name)
      - proc_active = controller_name == "lexeme_processors"
      - wiki_active = controller_name == "wiki"

      = link_to "Wiki", root_path,
        class: "px-3 py-2 rounded-xl #{wiki_active ? 'bg-indigo-300 shadow-sm text-gray-900' : 'text-gray-700 hover:bg-white/70'}"

      = link_to "Repositories", repositories_path,
        class: "px-3 py-2 rounded-xl #{repo_active ? 'bg-indigo-300 shadow-sm text-gray-900' : 'text-gray-700 hover:bg-white/70'}"

      = link_to "Processing", lexeme_processors_path,
        class: "px-3 py-2 rounded-xl #{proc_active ? 'bg-indigo-300 shadow-sm text-gray-900' : 'text-gray-700 hover:bg-white/70'}"