-# app/views/lexical_patterns/_row.html.haml
-# locals: pattern

%tr{
  id: dom_id(pattern),
  class: "group bg-white transition
          hover:bg-indigo-50/60
          focus-within:bg-indigo-50/60"
}
  %td{ class: "px-4 py-3 align-top rounded-l-xl" }
    %div{ class: "max-w-[320px] truncate font-medium text-gray-900 group-hover:text-indigo-900", title: pattern.name.to_s }
      = pattern.name

  %td{ class: "px-4 py-3 align-top" }
    %div{ class: "max-w-[240px] truncate font-mono text-xs text-gray-700", title: pattern.mode.to_s }
      = pattern.mode

  %td{ class: "px-4 py-3 align-top" }
    = render "enabled_toggle", lexical_pattern: pattern

  %td{ class: "px-4 py-3 align-top rounded-r-xl" }
    %div{ class: "flex flex-wrap items-center gap-2 justify-end" }
      = link_to test_lexical_pattern_path(pattern),
        class: "icon-button",
        data: { controller: "tooltip", tooltip_text_value: "test", tooltip_placement_value: "bottom" } do
        = svg_icon("play", class_name: "w-5 h-5")

      = link_to edit_lexical_pattern_path(pattern),
        class: "icon-button",
        data: { controller: "tooltip", tooltip_text_value: "edit", tooltip_placement_value: "bottom" } do
        = svg_icon("pencil-square", class_name: "w-5 h-5")

      = button_to lexical_pattern_path(pattern),
        method: :delete,
        params: { page: params[:page] },
        form: { class: "inline-flex" },
        class: "icon-button",
        onclick: "return window.PopConfirmLog.open(event, this)",
        data: { controller: "tooltip", tooltip_text_value: "Delete", tooltip_placement_value: "bottom", confirm_title: "Delete pattern", confirm_message: "Delete this pattern? This cannot be undone." } do
        = svg_icon("trash", class_name: "w-5 h-5")