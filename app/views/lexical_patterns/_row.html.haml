-# app/views/lexical_patterns/_row.html.haml
-# locals: pattern

%tr{
  id: dom_id(pattern),
  class: "group bg-white transition
          hover:bg-indigo-50/60
          focus-within:bg-indigo-50/60"
}
  %td{ class: "px-4 py-3 align-top rounded-l-xl" }
    %div{ class: "max-w-[320px] truncate font-medium text-gray-900 group-hover:text-indigo-900", title: pattern.name.to_s }
      = pattern.name

  %td{ class: "px-4 py-3 align-top" }
    %div{ class: "max-w-[240px] truncate font-mono text-xs text-gray-700", title: pattern.mode.to_s }
      = pattern.mode

  %td{ class: "px-4 py-3 align-top" }
    = render "enabled_toggle", lexical_pattern: pattern

  %td{ class: "px-4 py-3 align-top" }
    %span{ class: "inline-flex items-center rounded-lg bg-gray-100 text-gray-700 px-2 py-1 text-xs font-mono" }
      = pattern.priority

  %td{ class: "px-4 py-3 align-top rounded-r-xl" }
    %div{ class: "flex flex-wrap items-center gap-2 justify-end" }
      = link_to "Test", test_lexical_pattern_path(pattern), class: "button-secondary"
      = link_to "Edit", edit_lexical_pattern_path(pattern), class: "button-secondary"
      = button_to "Delete",
        lexical_pattern_path(pattern),
        method: :delete,
        params: { page: params[:page] },
        form: { class: "inline-flex" },
        onclick: "return window.PopConfirmLog.open(event, this)",
        data: { confirm_title: "Delete pattern", confirm_message: "Delete this pattern? This cannot be undone." },
        class: "button-danger"