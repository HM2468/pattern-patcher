-# app/views/lexical_patterns/_current_pattern.html.haml
-# Left sidebar card: Current Pattern

= turbo_frame_tag "current_pattern" do
  - pattern = @current_pattern

  %div{ class: "rounded-2xl border border-indigo-200 overflow-hidden" }
    %div{ class: "bg-indigo-100 px-4 py-3 flex items-start justify-between gap-3" }
      %div{ class: "min-w-0" }
        %div{ class: "text-sm font-semibold text-gray-900 truncate" }
          Current Pattern

      %div{ class: "shrink-0 flex items-center gap-2" }
        = link_to lexical_patterns_path,
          class: "icon-button",
          data: tooltip_data(tip: "All patterns", turbo_frame: "repo_right") do
          = svg_icon("ellipsis-horizontal", class_name: "w-6 h-6")

    - if pattern.nil?
      %div{ class: "px-2 py-2 space-y-2" }
        %div{ class: "text-center text-sm text-gray-600" }
          Select or create a pattern first.
        %div{ class: "flex items-center justify-center" }
          = link_to lexical_patterns_path,
            class: "icon-button",
            data: tooltip_data(tip: "All patterns", turbo_frame: "repo_right") do
            = svg_icon("arrow-uturn-right", class_name: "w-6 h-6")
    - else
      %div{ class: "px-2 py-2 space-y-2" }
        - name_text = pattern&.name.presence || "—"
        %div.repo-meta-block
          %div.repo-meta-label name
          %div.repo-meta-value{ title: name_text }
            = name_text

        - regexp_text = pattern&.pattern.presence || "—"
        %div.repo-meta-block
          %div.repo-meta-label regexp
          %div.repo-meta-value{ title: regexp_text }
            = regexp_text