-# app/views/lexical_patterns/test.html.haml
%div{ class: "max-w-5xl mx-auto p-6" }
  %div{ class: "mb-4" }
    %div{ class: "text-lg font-semibold" }= @lexical_pattern.name
    %div{ class: "mt-2 font-mono text-xs bg-gray-50 border rounded p-3 break-all" }= @lexical_pattern.pattern

  %div{ class: "mt-6" }
    %div{ class: "text-sm font-semibold mb-2" } Scan based on the pattern above line by line

    -# Rich text input (contenteditable)
    %div#test_editor{
      contenteditable: "true",
      class: "border rounded-lg p-3 h-[420px] overflow-auto bg-white whitespace-pre-wrap font-mono text-sm outline-none",
      data: { placeholder: "Paste your text here..." }
    }

    %div{ class: "mt-2 text-center" }
      %div#match_stat{ class: "text-sm text-gray-700 inline-block" }
      %div#scan_error{ class: "mt-1 text-sm text-red-700 hidden" }

    %div{ class: "mt-4 flex items-center justify-between gap-2" }
      %div{ class: "flex items-center gap-2" }
        %button#scan_btn{ type: "button", class: "inline-flex items-center rounded-xl bg-gray-900 px-6 py-2 text-sm font-medium text-white hover:bg-black" } Scan
        %button#prev_btn{ type: "button", class: "inline-flex items-center rounded-xl border px-4 py-2 text-sm hover:bg-gray-50", disabled: true } Prev
        %button#next_btn{ type: "button", class: "inline-flex items-center rounded-xl border px-4 py-2 text-sm hover:bg-gray-50", disabled: true } Next
      %div{ class: "flex items-center gap-2" }
        %a{ href: "javascript:history.back()", class: "inline-flex items-center rounded-xl border px-4 py-2 text-sm hover:bg-gray-50" } Back

:javascript
  window.RegexTestPage = {
    runTestUrl: "#{run_test_lexical_pattern_path(@lexical_pattern)}"
  };