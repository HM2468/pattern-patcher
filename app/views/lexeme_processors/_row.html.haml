-# app/views/lexeme_processors/_row.html.haml
-# locals: processor

%tr{
  id: dom_id(processor),
  class: "group bg-white transition
          hover:bg-indigo-50/60
          focus-within:bg-indigo-50/60"
}
  %td{ class: "px-4 py-3 align-top rounded-l-xl" }
    %div{ class: "max-w-[320px] truncate font-medium text-gray-900 group-hover:text-indigo-900", title: processor.name.to_s }
      = processor.name

  %td{ class: "px-4 py-3 align-top" }
    %div{ class: "max-w-[240px] truncate font-mono text-xs text-gray-700", title: processor.key.to_s }
      = processor.key

  %td{ class: "px-4 py-3 align-top" }
    %div{ class: "max-w-[240px] truncate font-mono text-xs text-gray-700", title: processor.entrypoint.to_s }
      = processor.entrypoint

  %td{ class: "px-4 py-3 align-top" }
    = render "enabled_toggle", lexeme_processor: processor

  %td{ class: "px-4 py-3 align-top rounded-r-xl" }
    %div{ class: "flex flex-wrap items-center gap-2 justify-end" }

      -# Detail
      = link_to lexeme_processor_path(processor),
        class: "icon-button",
        data: tooltip_data(tip: "Detail", turbo_frame: "processor_right") do
        = svg_icon("eye", class_name: "w-6 h-6")

      -# Edit
      = link_to edit_lexeme_processor_path(processor),
        class: "icon-button",
        data: tooltip_data(tip: "Edit") do
        = svg_icon("pencil-square", class_name: "w-5 h-5")

      -# Delete
      = button_to lexeme_processor_path(processor),
        method: :delete,
        params: { page: params[:page] },
        form: { class: "inline-flex" },
        class: "icon-button",
        onclick: "return window.PopConfirmLog.open(event, this)",
        data: delete_tip(title: "Delete processor", msg: "Delete this processor? This cannot be undone.") do
        = svg_icon("trash", class_name: "w-5 h-5")