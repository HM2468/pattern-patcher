-# frozen_string_literal: true
-# app/views/occurrences/_count.html.haml
-# Left sidebar card: Lexeme Counts

= turbo_frame_tag "occ_rev_count" do
  %div{ class: "rounded-2xl border border-indigo-200 bg-white shadow-sm overflow-hidden" }
    %div{ class: "bg-indigo-100 px-4 py-3 flex items-start justify-between gap-3" }
      %div{ class: "min-w-0" }
        %div{ class: "text-sm font-semibold text-gray-900 truncate" }
          All Reviews

      %div{ class: "shrink-0 flex items-center gap-2" }
        = link_to occurrence_reviews_path,
          class: "icon-button",
          data: tooltip_data(tip: "All reviews", turbo_frame: "processor_right") do
          = svg_icon("arrow-uturn-right", class_name: "w-6 h-6")

    %div{ class: "px-2 py-2" }
      %div{ class: "grid grid-cols-2 gap-2" }

        -# Pending (top-left)
        %div.repo-meta-block
          %div.repo-meta-label Pending
          %div.repo-meta-value{ title: @pending_occ_rev }
            = link_to occurrence_reviews_path(status: "pending"),
              data: { turbo_frame: "processor_right" },
              class: "repo-stat-card" do
              %div.repo-stat-value= @pending_occ_rev

        -# Processed (top-right)
        %div.repo-meta-block
          %div.repo-meta-label Reviewed
          %div.repo-meta-value{ title: @reviewed_occ_rev }
            = link_to occurrence_reviews_path(status: "reviewed"),
              data: { turbo_frame: "processor_right" },
              class: "repo-stat-card" do
              %div.repo-stat-value= @reviewed_occ_rev
