-# app/views/repository_files/_file_list.html.haml

- if @repositories.empty?
  %div{ class: "p-6 text-gray-700" } No repositories found.
- elsif @repository_files.empty?
  %div{ class: "p-6 text-gray-700" } Please import files or check whether the repository is empty.
- else
  %div{ class: "p-3 flex items-center justify-between" }
    %div
      %div{ class: "font-semibold text-sm" } Files
      %div{ class: "text-xs text-gray-600" }
        Repository:
        %span{ class: "font-mono" }= @repository.name
    %div{ class: "text-xs text-gray-600" }
      Showing up to 200 per page

  %div{ class: "p-3 flex items-center gap-3" }
    %select#bulk_action{ class: "text-sm border rounded px-2 py-1" }
      %option{ value: "" } Bulk actions...
      %option{ value: "noop" } (placeholder) No-op

    %button#bulk_apply{ type: "button", class: "text-sm border rounded px-2 py-1 bg-white hover:bg-gray-50" } Apply
    %div#bulk_hint{ class: "text-xs text-gray-600 ml-auto" } Select files to enable bulk ops.

  %div{ class: "overflow-auto flex-grow rounded-2xl bg-white shadow-sm" }
    %table{ class: "w-full text-sm" }
      %thead{ class: "bg-indigo-100 text-gray-600" }
        %tr
          %th{ class: "w-10 px-4 py-3 text-left" }
            %input#check_all{ type: "checkbox" }
          %th{ class: "px-4 py-3 text-left font-semibold" } Path
      %tbody{ class: "divide-y divide-gray-300" }
        - @repository_files.each do |f|
          %tr{ class: "hover:bg-indigo-50/60" }
            %td{ class: "px-4 py-3 align-top" }
              %input.file_check{ type: "checkbox", value: f.id }
            %td{ class: "px-4 py-3 align-top" }
              %div{ class: "truncate max-w-[56rem]" }= f.path

  %div{ class: "p-3 border-t" }
    = render "shared/pagination", collection: @repository_files